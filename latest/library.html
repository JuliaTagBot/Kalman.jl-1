<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Library · Kalman.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>Kalman.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li class="current"><a class="toctext" href="library.html">Library</a><ul class="internal"><li><a class="toctext" href="#Linear-systems-1">Linear systems</a></li><li><a class="toctext" href="#Filtering-1">Filtering</a></li><li><a class="toctext" href="#Smoothing-1">Smoothing</a></li><li><a class="toctext" href="#Iterators-1">Iterators</a></li><li><a class="toctext" href="#Tracking-1">Tracking</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="library.html">Library</a></li></ul><a class="edit-page" href="https://github.com/mschauer/Kalman.jl/blob/master/docs/src/library.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Library</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Library-1" href="#Library-1">Library</a></h1><h2><a class="nav-anchor" id="Linear-systems-1" href="#Linear-systems-1">Linear systems</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.LinearHomogSystem" href="#Kalman.LinearHomogSystem"><code>Kalman.LinearHomogSystem</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">LinearHomogSystem &lt;: StateSpaceModel

LinearHomogSystem(x0, P0, Phi, b, Q, y, H, R)</code></pre><p>Time homogeneous linear dynamical model with linear observation scheme corresponding to</p><p>$ x[k] = Φx[k−1] + b + w[k],    w[k] ∼ N(0, Q) $</p><p>$ y[k] = Hx[k] + v[k],    v[k] ∼ N(0, R) $</p><p>The argument <code>y</code> to the constructor is a dummy variable with the same type and <code>size</code>  as the observations.</p><p><strong>Example</strong></p><pre><code class="language-none">x0 = [1., 0.]
P0 = eye(2)

Phi = [0.8 0.2; 0.0 0.8]
b = zeros(2)
Q = [0.1 0.0; 0.0 1.0]

y = [NaN]
H = [1.0 0.0]
R = eye(1)
M = LinearHomogSystem(x0, P0, Phi, b, Q, y, H, R)</code></pre></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L21">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="StatsBase.sample" href="#StatsBase.sample"><code>StatsBase.sample</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">Y, X = sample(n, m, M::LinearHomogSystem) </code></pre><p>Sample observations generated by <code>M</code>.</p><ul><li><p>n – number of observations per simulation</p></li><li><p>m – number of independent simulations</p></li><li><p>M – linear dynamic system and observation model</p></li><li><p>Y – observations (d2xnxm array)</p></li><li><p>X – simulated processes (dxnxm array)</p></li></ul></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/generate.jl#L28-L42">source</a></section><h2><a class="nav-anchor" id="Filtering-1" href="#Filtering-1">Filtering</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.kalmanfilter" href="#Kalman.kalmanfilter"><code>Kalman.kalmanfilter</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">ll, xxf = kalmanfilter(yy::Matrix, M::LinearHomogSystem)</code></pre><p>Kalman filter</p><pre><code class="language-none">yy -- d₂xn array
M -- linear model
ll -- marginal likelihood
xxf -- filtered process</code></pre></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L156-L165">source</a><div><pre><code class="language-none">ll, X = kalmanfilter{T}(Y::Array{T,3}, M::LinearHomogSystem)</code></pre><p>Stack Kalman filter</p><pre><code class="language-none">Y -- array of m independent processes (dxnxm array)

X -- filtered processes (dxnxm array)
ll -- product marginal log likelihood</code></pre></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L172-L181">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.observe!" href="#Kalman.observe!"><code>Kalman.observe!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">observe!(s, x, P, t, y, M) -&gt; t, y, H, R</code></pre><p>Obtain observation time <code>t</code>, observation <code>y</code>, observation matrix <code>H</code> and observation covariance <code>H</code> using model <code>M</code>. Except for certain use cases this is  a no-op on arguments <code>t</code> and <code>y</code> (but needs to return <code>t</code> and <code>y</code> nevertheless.)</p></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L101-L107">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.predict!" href="#Kalman.predict!"><code>Kalman.predict!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">predict!(s, x, P, t, M) -&gt; x, Ppred, Phi</code></pre><p>Computes predicted state <code>x</code> and predicted covariance of model <code>M</code> according  the prediction equations</p><div>\[P_{pred} = \Phi P \Phi&#39; + Q\]</div><p>Also returns evolution operator / Jacobian <code>Phi</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L73">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.correct!" href="#Kalman.correct!"><code>Kalman.correct!</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">correct!(x, Ppred, y, H, R, M) -&gt; x, P, yres, S, K</code></pre><p>Perform the Kalman correction step using state space model <code>M</code>. Inputs are predicted state <code>x</code> and predicted covariance, as well as observation <code>y</code> and observation matrix <code>H</code>, observation covariance <code>R</code>.</p><p>Outputs filtered state <code>x</code>, filtered state covariance <code>P</code>, residual <code>y</code> as well as innovation covariance <code>S</code> and Kalman gain <code>K</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L112-L121">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.evolve" href="#Kalman.evolve"><code>Kalman.evolve</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">evolve(s, x, P, t, M) -&gt; x</code></pre><p>Evolve state <code>x</code> according to the state dynamics of model <code>M</code> without noise, usually </p><p>$ x \mapsto \Phi x + b. $</p></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L89">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.kalman_kernel" href="#Kalman.kalman_kernel"><code>Kalman.kalman_kernel</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">kalman_kernel(s, x, P, t, Y, SSM) -&gt; t, x, P, Ppred, ll, K</code></pre><p>Single Kalman filter step consisting of a prediction step <code>predict!</code>, an observation step <code>observe!</code> and a correction step <code>correct!</code>. Return filtered covariance <code>P</code> and predicted <code>Ppred</code></p><p>Computes and returns as well the log likelihood of the residual and the Kalman gain.</p></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L134-L141">source</a></section><h2><a class="nav-anchor" id="Smoothing-1" href="#Smoothing-1">Smoothing</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.kalmanrts" href="#Kalman.kalmanrts"><code>Kalman.kalmanrts</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">xxs, PP, PPpred, ll = kalmanrts(yy, xxs, M::LinearHomogSystem)</code></pre><p>Rauch-Tung-Striebel smoother</p><pre><code class="language-none">yy -- d₂xn array or 
xxs -- empty dxn array or view
M --  linear dynamic system and observation model

xxs -- smoothed process
PP -- smoother variance
PPpred -- smoother prediction
ll -- filter likelihood</code></pre></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L275-L288">source</a><div><pre><code class="language-none">X = kalmanrts{T}(Y::Array{T,3}, M::LinearHomogSystem)</code></pre><p>Stack Rauch-Tung-Striebel smoother, computes the marginal smoothed states, that is it computes the law <span>$p(x_i | y_{1:n})$</span>.</p><pre><code class="language-none">Y -- m independent processes (d₂xnxm array)

X -- smoothed processes (dxnxm array)</code></pre></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/Kalman.jl#L327-L336">source</a></section><h2><a class="nav-anchor" id="Iterators-1" href="#Iterators-1">Iterators</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.KalmanFilter" href="#Kalman.KalmanFilter"><code>Kalman.KalmanFilter</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">KalmanFilter(y, M)</code></pre><p>Kalman filter as iterator, iterating over <code>Gaussian</code>s representing the filtered distribution of <code>x</code>. Arguments <code>y</code> iterates over signal values.</p><p><strong>Example</strong></p><pre><code class="language-none">kf = KalmanFilter(Y, M) #
est = collect(kf)</code></pre></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/iterator.jl#L3-L15">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.MappedKalmanFilter" href="#Kalman.MappedKalmanFilter"><code>Kalman.MappedKalmanFilter</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">MappedKalmanFilter(ty, M, f)</code></pre><p>Kalman filter with model <code>M</code> as iterator, iterating over the result <code>ret</code> of <code>ret = f(t, x, P, Ppred, ll, K)</code>. <code>ty</code> iterates over pairs <code>(t, y)</code>  of signal time and signal value.</p><p>Eltype is determined by calling <code>mappedreturntype(::typeof(f))</code> with fallback any.</p><p><strong>Example</strong></p><pre><code class="language-none">f(t, x, P, Ppred, ll, K) = ll
kf = MappedKalmanFilter(zip(Base.Iterators.countfrom(1), Y), M, f)
ll = sum(kf)</code></pre><p>For performance, define:</p><pre><code class="language-none">import Kalman: mappedreturntype
Kalman.mappedreturntype(_, ::Type{typeof(f)}) = Float64</code></pre></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/iterator.jl#L39-L61">source</a></section><h2><a class="nav-anchor" id="Tracking-1" href="#Tracking-1">Tracking</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="Kalman.track" href="#Kalman.track"><code>Kalman.track</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">track(A::Matrix{Float64}, p, h = 10) -&gt; p2, err</code></pre><p>Track blurry lightsource by applying a window with half-width <code>h</code> at  an approximate location <code>p = (i,j)</code> and find the average weighted location of points with <em>high</em> light intensity. </p><p>Gives an standard error estimate.</p></div><a class="source-link" target="_blank" href="https://github.com/mschauer/Kalman.jl/blob/4379d156f3ef1711513435dbce7bf6a1ed004e5c/src/track.jl#L1-L9">source</a></section><footer><hr/><a class="previous" href="index.html"><span class="direction">Previous</span><span class="title">Home</span></a></footer></article></body></html>
